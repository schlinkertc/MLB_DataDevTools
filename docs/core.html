---

title: Data Dev Tools


keywords: fastai
sidebar: home_sidebar

summary: "API details."
description: "API details."
nb_path: "00_core.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 00_core.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Database" class="doc_header"><code>class</code> <code>Database</code><a href="https://github.com/humblechuck/sql_s3/tree/master/sql_s3/core.py#L12" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Database</code>(<strong><code>dbtype</code></strong>, <strong><code>Base</code></strong>=<em><code>None</code></em>, <strong><code>Meta</code></strong>=<em><code>None</code></em>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>
<p>Reference Object for Sql Alchemy Engine</p>
<p>dbtype: one of ['sqlite','pymysql','snowflake']
kwargs:
    sqlite</p>

<pre><code>    - path=&lt;path-to-database file&gt;
pymysql
    - username,password,hostname,database
snowflake
    - username,password,account,database,schema,warehouse,role</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">dotenv</span> <span class="kn">import</span> <span class="n">load_dotenv</span>
<span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">environ</span>
<span class="n">load_dotenv</span><span class="p">(</span><span class="s1">&#39;.env&#39;</span><span class="p">)</span>

<span class="n">mlb_db</span> <span class="o">=</span> <span class="n">Database</span><span class="p">(</span>
    <span class="n">dbtype</span><span class="o">=</span><span class="s1">&#39;pymysql&#39;</span><span class="p">,</span>
    <span class="n">username</span><span class="o">=</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;db_user&#39;</span><span class="p">),</span>
    <span class="n">password</span><span class="o">=</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;db_password&#39;</span><span class="p">),</span>
    <span class="n">hostname</span><span class="o">=</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;db_host&#39;</span><span class="p">),</span>
    <span class="n">database</span><span class="o">=</span><span class="s1">&#39;MLB&#39;</span>
<span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Engine(mysql+pymysql://admin:***@mydatabase.cjk1vmqlqaty.us-east-2.rds.amazonaws.com/MLB?charset=UTF8MB4)
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">mlb_db</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">table_names</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[&#39;actions&#39;,
 &#39;credits&#39;,
 &#39;game&#39;,
 &#39;game_players&#39;,
 &#39;matchups&#39;,
 &#39;movements&#39;,
 &#39;pitches&#39;,
 &#39;players&#39;,
 &#39;plays&#39;,
 &#39;team_records&#39;,
 &#39;teams&#39;,
 &#39;venue&#39;]</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="cached_query" class="doc_header"><code>cached_query</code><a href="https://github.com/humblechuck/sql_s3/tree/master/sql_s3/core.py#L51" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>cached_query</code>(<strong><code>sql_query</code></strong>, <strong><code>parameters</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>Method to query data from <a href="/sql_s3/core.html#Database"><code>Database</code></a> Ref Obj and return pandas dataframe</p>
<h2 id="Parameters">Parameters<a class="anchor-link" href="#Parameters"> </a></h2><p>sql_query : str
    saved SQL query
parameters : dict, optional
    populates named placeholders in query template.</p>
<h2 id="Returns">Returns<a class="anchor-link" href="#Returns"> </a></h2><p>df_raw : DataFrame
    Pandas DataFrame with raw data resulting from query</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">example_query</span> <span class="o">=</span> <span class="s2">&quot;SELECT * FROM pitches </span><span class="si">{WHERE}</span><span class="s2"> limit 100;&quot;</span>

<span class="n">mlb_db</span><span class="o">.</span><span class="n">cached_query</span><span class="p">(</span>
    <span class="n">example_query</span><span class="p">,</span><span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;WHERE&quot;</span><span class="p">:</span><span class="s2">&quot;WHERE details_call_code = &#39;F&#39;&quot;</span><span class="p">})</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>gamePk</th>
      <th>atBatIndex</th>
      <th>playEndTime</th>
      <th>index</th>
      <th>details_call_code</th>
      <th>details_call_description</th>
      <th>details_description</th>
      <th>details_code</th>
      <th>details_ballColor</th>
      <th>details_trailColor</th>
      <th>...</th>
      <th>hitData_totalDistance</th>
      <th>hitData_trajectory</th>
      <th>hitData_hardness</th>
      <th>hitData_location</th>
      <th>hitData_coordinates_coordX</th>
      <th>hitData_coordinates_coordY</th>
      <th>details_runnerGoing</th>
      <th>reviewDetails_isOverturned</th>
      <th>reviewDetails_reviewType</th>
      <th>reviewDetails_challengeTeamId</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>563411</td>
      <td>0</td>
      <td>2018-10-29T00:17:56.000Z</td>
      <td>0</td>
      <td>F</td>
      <td>Strike - Foul</td>
      <td>Foul</td>
      <td>F</td>
      <td>rgba(170, 21, 11, 1.0)</td>
      <td>rgba(188, 0, 33, 1.0)</td>
      <td>...</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
    </tr>
    <tr>
      <th>1</th>
      <td>563411</td>
      <td>1</td>
      <td>2018-10-29T00:19:24.000Z</td>
      <td>1</td>
      <td>F</td>
      <td>Strike - Foul</td>
      <td>Foul</td>
      <td>F</td>
      <td>rgba(170, 21, 11, 1.0)</td>
      <td>rgba(0, 34, 255, 1.0)</td>
      <td>...</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
    </tr>
    <tr>
      <th>2</th>
      <td>563411</td>
      <td>3</td>
      <td>2018-10-29T00:21:42.000Z</td>
      <td>1</td>
      <td>F</td>
      <td>Strike - Foul</td>
      <td>Foul</td>
      <td>F</td>
      <td>rgba(170, 21, 11, 1.0)</td>
      <td>rgba(188, 0, 33, 1.0)</td>
      <td>...</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
    </tr>
    <tr>
      <th>3</th>
      <td>563411</td>
      <td>6</td>
      <td>2018-10-29T00:29:58.000Z</td>
      <td>0</td>
      <td>F</td>
      <td>Strike - Foul</td>
      <td>Foul</td>
      <td>F</td>
      <td>rgba(170, 21, 11, 1.0)</td>
      <td>rgba(188, 0, 33, 1.0)</td>
      <td>...</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
    </tr>
    <tr>
      <th>4</th>
      <td>563411</td>
      <td>8</td>
      <td>2018-10-29T00:35:55.000Z</td>
      <td>5</td>
      <td>F</td>
      <td>Strike - Foul</td>
      <td>Foul</td>
      <td>F</td>
      <td>rgba(170, 21, 11, 1.0)</td>
      <td>rgba(187, 0, 69, 1.0)</td>
      <td>...</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>95</th>
      <td>564723</td>
      <td>74</td>
      <td>2019-03-05T23:01:25.139Z</td>
      <td>0</td>
      <td>F</td>
      <td>Foul</td>
      <td>Foul</td>
      <td>F</td>
      <td>rgba(170, 21, 11, 1.0)</td>
      <td>None</td>
      <td>...</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
    </tr>
    <tr>
      <th>96</th>
      <td>564724</td>
      <td>3</td>
      <td>2019-03-07T20:21:15.022Z</td>
      <td>1</td>
      <td>F</td>
      <td>Foul</td>
      <td>Foul</td>
      <td>F</td>
      <td>rgba(170, 21, 11, 1.0)</td>
      <td>None</td>
      <td>...</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
    </tr>
    <tr>
      <th>97</th>
      <td>564725</td>
      <td>34</td>
      <td>2019-03-08T21:48:24.514Z</td>
      <td>0</td>
      <td>F</td>
      <td>Foul</td>
      <td>Foul</td>
      <td>F</td>
      <td>rgba(170, 21, 11, 1.0)</td>
      <td>None</td>
      <td>...</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
    </tr>
    <tr>
      <th>98</th>
      <td>564725</td>
      <td>34</td>
      <td>2019-03-08T21:48:24.514Z</td>
      <td>1</td>
      <td>F</td>
      <td>Foul</td>
      <td>Foul</td>
      <td>F</td>
      <td>rgba(170, 21, 11, 1.0)</td>
      <td>None</td>
      <td>...</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
    </tr>
    <tr>
      <th>99</th>
      <td>564725</td>
      <td>69</td>
      <td>2019-03-08T23:06:18.752Z</td>
      <td>0</td>
      <td>F</td>
      <td>Foul</td>
      <td>Foul</td>
      <td>F</td>
      <td>rgba(170, 21, 11, 1.0)</td>
      <td>None</td>
      <td>...</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
    </tr>
  </tbody>
</table>
<p>100 rows × 65 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">q</span> <span class="o">=</span> <span class="s2">&quot;select distinct(details_call_description) result, count(*) as count from pitches group by details_call_description&quot;</span>
<span class="n">mlb_db</span><span class="o">.</span><span class="n">cached_query</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>result</th>
      <th>count</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Strike - Foul</td>
      <td>44</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Hit Into Play - Out(s)</td>
      <td>34</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Strike - Called</td>
      <td>42</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Hit Into Play - No Out(s)</td>
      <td>6</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Hit Into Play - Run(s)</td>
      <td>5</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Ball - Called</td>
      <td>74</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Strike - Swinging</td>
      <td>27</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Ball - Ball In Dirt</td>
      <td>2</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Strike - Swinging Blocked</td>
      <td>2</td>
    </tr>
    <tr>
      <th>9</th>
      <td>In play, out(s)</td>
      <td>96867</td>
    </tr>
    <tr>
      <th>10</th>
      <td>In play, no out</td>
      <td>34627</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Ball</td>
      <td>268532</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Called Strike</td>
      <td>130609</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Foul Tip</td>
      <td>6998</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Swinging Strike</td>
      <td>94443</td>
    </tr>
    <tr>
      <th>15</th>
      <td>In play, run(s)</td>
      <td>20976</td>
    </tr>
    <tr>
      <th>16</th>
      <td>Foul</td>
      <td>136091</td>
    </tr>
    <tr>
      <th>17</th>
      <td>Swinging Strike (Blocked)</td>
      <td>6310</td>
    </tr>
    <tr>
      <th>18</th>
      <td>Hit By Pitch</td>
      <td>2448</td>
    </tr>
    <tr>
      <th>19</th>
      <td>Ball In Dirt</td>
      <td>18458</td>
    </tr>
    <tr>
      <th>20</th>
      <td>Foul Bunt</td>
      <td>1756</td>
    </tr>
    <tr>
      <th>21</th>
      <td>Automatic Ball</td>
      <td>2708</td>
    </tr>
    <tr>
      <th>22</th>
      <td>Missed Bunt</td>
      <td>365</td>
    </tr>
    <tr>
      <th>23</th>
      <td>Pitchout</td>
      <td>66</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">nbdv_build_lib</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-135-c07f069864cc&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>nbdv_build_lib

<span class="ansi-red-fg">NameError</span>: name &#39;nbdv_build_lib&#39; is not defined</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">nbdev.export</span> <span class="kn">import</span> <span class="n">notebook2script</span><span class="p">;</span> <span class="n">notebook2script</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Converted 00_core.ipynb.
Converted index.ipynb.
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

